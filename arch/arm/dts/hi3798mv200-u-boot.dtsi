// SPDX-License-Identifier: GPL-2.0+
/*
 * U-Boot addition to:
 *  1) use platform data for the console
 *  2) provide support for the generic-ehci USB driver currently not available
 *     in the linux kernel (8/May/2017).
 *
 * (C) Copyright 2017 Jorge Ramirez-Ortiz <jorge.ramirez-ortiz@linaro.org>
 */

#include <dt-bindings/reset/ti-syscon.h>

/ {
	usb2phy1_port0: usb0 {
		compatible = "usb-nop-xceiv";
		clocks = <&clk 0xbc 0 0>;
		resets = <&rst 0xbc 4 ASSERT_SET>,
			 <&rst 0xbc 8 ASSERT_SET>;
		#phy-cells = <0>;
		status = "okay";
	};
};

&soc {
	clk: clock-controller@8a22000 {
		compatible = "hisilicon,hi3798mv200-clk";
		reg = <0x8a22000 0x1000>;
		#clock-cells = <3>;
	};

	rst: reset-controller@8a22000 {
		compatible = "hisilicon,hi3798cv200-reset";
		reg = <0x8a22000 0x1000>;
		#reset-cells = <3>;
	};

	usb2: ehci@9890000 {
		compatible = "generic-ehci";
		reg = <0x9890000 0x100>;
		clocks = <&clk 0xb8 0 0>,
		      <&clk 0xb8 4 0>,
		      <&clk 0xb8 5 0>;
		resets = <&rst 0xb8 12 ASSERT_SET>,
			 <&rst 0xb8 16 ASSERT_SET>,
			 <&rst 0xb8 13 ASSERT_SET>;
		/delete-property/ phys;
		phys = <&usb2phy1_port0>;
		/delete-property/ phy-names;
		phy-names = "usb";
		status = "okay";
	};
};

&gmac1 {
	resets = <&rst 0xcc 9  ASSERT_SET>,
		 <&rst 0xcc 11 ASSERT_SET>,
		 <&rst 0xcc 13 DEASSERT_SET>;
};

&uart0 {
	clock = <75000000>;
	status = "okay";
};
